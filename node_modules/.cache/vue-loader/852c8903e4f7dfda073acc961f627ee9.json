{"remainingRequest":"/Users/peeterkaju/test/space-travel/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue?vue&type=style&index=0&id=a7e647f8&scoped=true&lang=css","dependencies":[{"path":"/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue","mtime":1703734661324},{"path":"/Users/peeterkaju/test/space-travel/node_modules/css-loader/dist/cjs.js","mtime":1702295033230},{"path":"/Users/peeterkaju/test/space-travel/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1702295033476},{"path":"/Users/peeterkaju/test/space-travel/node_modules/postcss-loader/src/index.js","mtime":1702295033302},{"path":"/Users/peeterkaju/test/space-travel/node_modules/cache-loader/dist/cjs.js","mtime":1702295033100},{"path":"/Users/peeterkaju/test/space-travel/node_modules/vue-loader-v16/dist/index.js","mtime":1702295033302}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ib29raW5nLW1vZGFsIHsKICBwb3NpdGlvbjogZml4ZWQ7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOwogIHBhZGRpbmc6IDIwcHg7CiAgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgwLCAwLCAwLCAwLjUpOwp9CgouYm9va2luZy1jb250ZW50IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCmlucHV0IHsKICBib3JkZXI6IDFweCBzb2xpZCBibGFjazsKICBwYWRkaW5nOiAycHg7Cn0K"},{"version":3,"sources":["/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue"],"names":[],"mappings":";AA8EA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACzC;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB;;AAEA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACd","file":"/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue","sourceRoot":"","sourcesContent":["<template>\n  <div v-if=\"isOpen\" class=\"booking-modal\">\n    <div class=\"booking-content\">\n      <h2>Confirm Booking</h2>\n      <p>Flight: {{ bookingDetails.routes.from }} - {{ bookingDetails.routes.destination }}</p>\n      <p>Companies: {{ bookingDetails.companyNames.join(', ') }}</p>\n      <p>Start Time: {{ this.formatDate(bookingDetails.startTime) }}</p>\n      <p>Total price: {{ bookingDetails.totalPrice }}</p>\n      <p>Total duration: {{ bookingDetails.totalDuration }}</p>\n\n      <label for=\"firstName\">First Name:</label>\n      <input type=\"text\" id=\"firstName\" v-model=\"bookingDetails.firstName\" />\n\n      <label for=\"lastName\">Last Name:</label>\n      <input type=\"text\" id=\"lastName\" v-model=\"bookingDetails.lastName\" />\n\n      <button @click=\"this.sendDataAndConfirm\">Confirm Booking</button>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    isOpen: Boolean,\n    bookingDetails: Object,\n  },\n  methods: {\n    async sendDataAndConfirm() {\n      const currentDateTime = new Date();\n      const validUntilParts = this.bookingDetails.validUntil.split(/[/,:]+/);\n      console.log(validUntilParts)\n      const validUntilDateTime = new Date(\n        validUntilParts[2],     \n        validUntilParts[1] - 1,           \n        validUntilParts[0],               \n        validUntilParts[3],                \n        validUntilParts[4],              \n        validUntilParts[5]                \n      );\n\n      console.log(currentDateTime, validUntilDateTime);\n      if (validUntilDateTime < currentDateTime) {\n        alert(\"Unfortunately, this pricelist is outdated.\");\n        this.$router.go();\n      } else if (!this.bookingDetails.firstName || !this.bookingDetails.lastName) {\n        alert(\"Please enter both 'First Name' and 'Last Name' values.\");\n      } else {\n        console.log(\"fetching\");\n        const response = await fetch(`http://localhost:8080/api/post`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(this.bookingDetails),\n        });\n        if (response.status === 200) {\n          this.$emit('confirm');\n        } else if (response.status === 400) {\n          this.$router.push({ name: \"routeNotFound\" });\n        } else if (response.status === 500) {\n          this.$router.push({ name: \"internalError\" });\n        } else {\n          console.log(\"Unhandled response status:\", response.status);\n        }\n      }\n    },\n    formatDate(dateTimeString) {\n      const parts = dateTimeString.split(/[-T:.Z]/);\n      const date = new Date(\n        Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5])\n      );\n      return date.toLocaleString(\"en-GB\"); // Adjust the locale as needed\n    },\n  },\n};\n</script>\n  \n<style scoped>\n.booking-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: white;\n  padding: 20px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n}\n\n.booking-content {\n  text-align: center;\n}\n\ninput {\n  border: 1px solid black;\n  padding: 2px;\n}\n</style>\n  "]}]}