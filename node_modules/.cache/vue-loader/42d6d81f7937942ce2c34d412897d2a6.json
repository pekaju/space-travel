{"remainingRequest":"/Users/peeterkaju/test/space-travel/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue?vue&type=template&id=2aa90a2a&scoped=true","dependencies":[{"path":"/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue","mtime":1703734666453},{"path":"/Users/peeterkaju/test/space-travel/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1702295033482},{"path":"/Users/peeterkaju/test/space-travel/node_modules/cache-loader/dist/cjs.js","mtime":1702295033100},{"path":"/Users/peeterkaju/test/space-travel/node_modules/vue-loader-v16/dist/index.js","mtime":1702295033302}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiB2LWlmPSJpc09wZW4iIGNsYXNzPSJib29raW5nLW1vZGFsIj4KICAgIDxkaXYgY2xhc3M9ImJvb2tpbmctY29udGVudCI+CiAgICAgIDxoMj5Db25maXJtIEJvb2tpbmc8L2gyPgogICAgICA8cD5GbGlnaHQ6IHt7IGJvb2tpbmdEZXRhaWxzLnJvdXRlcy5mcm9tIH19IC0ge3sgYm9va2luZ0RldGFpbHMucm91dGVzLmRlc3RpbmF0aW9uIH19PC9wPgogICAgICA8cD5Db21wYW5pZXM6IHt7IGJvb2tpbmdEZXRhaWxzLmNvbXBhbnlOYW1lcy5qb2luKCcsICcpIH19PC9wPgogICAgICA8cD5TdGFydCBUaW1lOiB7eyB0aGlzLmZvcm1hdERhdGUoYm9va2luZ0RldGFpbHMuc3RhcnRUaW1lKSB9fTwvcD4KICAgICAgPHA+VG90YWwgcHJpY2U6IHt7IGJvb2tpbmdEZXRhaWxzLnRvdGFsUHJpY2UgfX08L3A+CiAgICAgIDxwPlRvdGFsIGR1cmF0aW9uOiB7eyBib29raW5nRGV0YWlscy50b3RhbER1cmF0aW9uIH19PC9wPgoKICAgICAgPGxhYmVsIGZvcj0iZmlyc3ROYW1lIj5GaXJzdCBOYW1lOjwvbGFiZWw+CiAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iZmlyc3ROYW1lIiB2LW1vZGVsPSJib29raW5nRGV0YWlscy5maXJzdE5hbWUiIC8+CgogICAgICA8bGFiZWwgZm9yPSJsYXN0TmFtZSI+TGFzdCBOYW1lOjwvbGFiZWw+CiAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibGFzdE5hbWUiIHYtbW9kZWw9ImJvb2tpbmdEZXRhaWxzLmxhc3ROYW1lIiAvPgoKICAgICAgPGJ1dHRvbiBAY2xpY2s9InRoaXMuc2VuZERhdGFBbmRDb25maXJtIj5Db25maXJtIEJvb2tpbmc8L2J1dHRvbj4KICAgIDwvZGl2PgogIDwvZGl2Pgo="},{"version":3,"sources":["/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACtC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACxF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MAC7D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACjE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MAClD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;MAExD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;MAEtE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACvC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;;MAEpE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC,CAAC,CAAC,CAAC,CAAC;EACP,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/peeterkaju/test/space-travel/src/components/BookingModal.vue","sourceRoot":"","sourcesContent":["<template>\n  <div v-if=\"isOpen\" class=\"booking-modal\">\n    <div class=\"booking-content\">\n      <h2>Confirm Booking</h2>\n      <p>Flight: {{ bookingDetails.routes.from }} - {{ bookingDetails.routes.destination }}</p>\n      <p>Companies: {{ bookingDetails.companyNames.join(', ') }}</p>\n      <p>Start Time: {{ this.formatDate(bookingDetails.startTime) }}</p>\n      <p>Total price: {{ bookingDetails.totalPrice }}</p>\n      <p>Total duration: {{ bookingDetails.totalDuration }}</p>\n\n      <label for=\"firstName\">First Name:</label>\n      <input type=\"text\" id=\"firstName\" v-model=\"bookingDetails.firstName\" />\n\n      <label for=\"lastName\">Last Name:</label>\n      <input type=\"text\" id=\"lastName\" v-model=\"bookingDetails.lastName\" />\n\n      <button @click=\"this.sendDataAndConfirm\">Confirm Booking</button>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    isOpen: Boolean,\n    bookingDetails: Object,\n  },\n  methods: {\n    async sendDataAndConfirm() {\n      const currentDateTime = new Date();\n      const validUntilParts = this.bookingDetails.validUntil.split(/[/,:]+/);\n      console.log(validUntilParts)\n      const validUntilDateTime = new Date(\n        validUntilParts[2],     \n        validUntilParts[1] - 1,           \n        validUntilParts[0],               \n        validUntilParts[3],                \n        validUntilParts[4],              \n        validUntilParts[5]                \n      );\n\n      console.log(currentDateTime, validUntilDateTime);\n      if (validUntilDateTime < currentDateTime) {\n        alert(\"Unfortunately, this pricelist is outdated.\");\n        this.$router.go();\n      } else if (!this.bookingDetails.firstName || !this.bookingDetails.lastName) {\n        alert(\"Please enter both 'First Name' and 'Last Name' values.\");\n      } else {\n        console.log(\"fetching\");\n        const response = await fetch(`http://localhost:8080/api/post`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(this.bookingDetails),\n        });\n        if (response.status === 200) {\n          this.$emit('confirm');\n        } else if (response.status === 400) {\n          this.$router.push({ name: \"routeNotFound\" });\n        } else if (response.status === 500) {\n          this.$router.push({ name: \"internalError\" });\n        } else {\n          console.log(\"Unhandled response status:\", response.status);\n        }\n      }\n    },\n    formatDate(dateTimeString) {\n      const parts = dateTimeString.split(/[-T:.Z]/);\n      const date = new Date(\n        Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5])\n      );\n      return date.toLocaleString(\"en-GB\");\n    },\n  },\n};\n</script>\n  \n<style scoped>\n.booking-modal {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: white;\n  padding: 20px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n}\n\n.booking-content {\n  text-align: center;\n}\n\ninput {\n  border: 1px solid black;\n  padding: 2px;\n}\n</style>\n  "]}]}